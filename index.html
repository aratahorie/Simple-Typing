<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Çø„Ç§„Éî„É≥„Ç∞„Éû„Çπ„Çø„Éº</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- „Çπ„Çø„Éº„ÉàÁîªÈù¢ -->
    <div id="startScreen" class="screen active">
        <div class="container">
            <h1 class="game-title">„Çø„Ç§„Éî„É≥„Ç∞„Éû„Çπ„Çø„Éº</h1>
            <div class="settings-card">
                <div class="setting-group">
                    <label for="playerName">„Éó„É¨„Ç§„É§„ÉºÂêç</label>
                    <input type="text" id="playerName" placeholder="ÂêçÂâç„ÇíÂÖ•ÂäõÔºàÊúÄÂ§ß20ÊñáÂ≠óÔºâ" maxlength="20">
                </div>
                
                <div class="setting-group">
                    <label>Èõ£ÊòìÂ∫¶</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="difficulty" value="easy">
                            <span>Easy (3-5ÊñáÂ≠ó)</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="difficulty" value="normal" checked>
                            <span>Normal (4-8ÊñáÂ≠ó)</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="difficulty" value="hard">
                            <span>Hard (6-12ÊñáÂ≠ó)</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="difficulty" value="expert">
                            <span>Expert („Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞)</span>
                        </label>
                    </div>
                </div>
                
                <div class="setting-group">
                    <label>„Ç≤„Éº„É†„É¢„Éº„Éâ</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="gameMode" value="time" checked>
                            <span>ÊôÇÈñìÂà∂Èôê„É¢„Éº„Éâ</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="gameMode" value="words">
                            <span>ÂçòË™ûÊï∞„É¢„Éº„Éâ</span>
                        </label>
                    </div>
                </div>
                
                <div class="setting-group" id="timeSettings">
                    <label>Âà∂ÈôêÊôÇÈñì</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="duration" value="60" checked>
                            <span>60Áßí</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="duration" value="90">
                            <span>90Áßí</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="duration" value="120">
                            <span>120Áßí</span>
                        </label>
                    </div>
                </div>
                
                <div class="setting-group hidden" id="wordSettings">
                    <label>ÂçòË™ûÊï∞</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="wordCount" value="25" checked>
                            <span>25Ë™û</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="wordCount" value="50">
                            <span>50Ë™û</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="wordCount" value="100">
                            <span>100Ë™û</span>
                        </label>
                    </div>
                </div>
            </div>
            
            <div class="button-group">
                <button id="startButton" class="btn btn-primary">„Ç≤„Éº„É†ÈñãÂßã</button>
                <button id="rankingButton" class="btn btn-secondary">„É©„É≥„Ç≠„É≥„Ç∞</button>
            </div>
            
            <button id="themeToggle" class="theme-toggle" aria-label="„ÉÜ„Éº„ÉûÂàá„ÇäÊõø„Åà">
                <span class="theme-icon">üåô</span>
            </button>
        </div>
    </div>
    
    <!-- „Ç≤„Éº„É†ÁîªÈù¢ -->
    <div id="gameScreen" class="screen">
        <div class="container">
            <div class="game-header">
                <div class="game-info">
                    <div class="info-item">
                        <span class="info-label">„Çπ„Ç≥„Ç¢</span>
                        <span id="scoreDisplay" class="info-value">0</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label" id="timerLabel">ÊÆã„ÇäÊôÇÈñì</span>
                        <span id="timerDisplay" class="info-value">60</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">WPM</span>
                        <span id="wpmDisplay" class="info-value">0</span>
                    </div>
                    <div class="info-item">
                        <span class="info-label">Ê≠£Á¢∫Áéá</span>
                        <span id="accuracyDisplay" class="info-value">100%</span>
                    </div>
                </div>
            </div>
            
            <div class="game-main">
                <div class="word-container">
                    <div id="currentWord" class="current-word"></div>
                    <div id="wordDisplay" class="word-display"></div>
                </div>
                <input type="text" id="wordInput" class="word-input" placeholder="„Åì„Åì„Å´ÂÖ•Âäõ..." autocomplete="off">
                <div class="input-feedback" id="inputFeedback"></div>
            </div>
            
            <div class="progress-bar">
                <div id="progressFill" class="progress-fill"></div>
            </div>
            
            <div class="combo-display" id="comboDisplay">
                ÈÄ£Á∂öÊ≠£Ëß£: <span id="comboCount">0</span>
            </div>
        </div>
    </div>
    
    <!-- ÁµêÊûúÁîªÈù¢ -->
    <div id="resultScreen" class="screen">
        <div class="container">
            <h2 class="result-title">„Ç≤„Éº„É†ÁµÇ‰∫ÜÔºÅ</h2>
            <div class="result-card">
                <div class="result-stats">
                    <div class="stat-item">
                        <span class="stat-label">ÊúÄÁµÇ„Çπ„Ç≥„Ç¢</span>
                        <span id="finalScore" class="stat-value large">0</span>
                    </div>
                    <div class="stat-row">
                        <div class="stat-item">
                            <span class="stat-label">WPM</span>
                            <span id="finalWPM" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Ê≠£Á¢∫Áéá</span>
                            <span id="finalAccuracy" class="stat-value">0%</span>
                        </div>
                    </div>
                    <div class="stat-row">
                        <div class="stat-item">
                            <span class="stat-label">ÂÆå‰∫ÜÂçòË™ûÊï∞</span>
                            <span id="finalWords" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">ÊúÄÈ´òÈÄ£Á∂öÊ≠£Ëß£</span>
                            <span id="maxCombo" class="stat-value">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="save-status" id="saveStatus">
                    <span class="save-icon">üíæ</span>
                    <span class="save-text">„Çπ„Ç≥„Ç¢„Çí‰øùÂ≠ò‰∏≠...</span>
                </div>
                
                <div class="button-group">
                    <button id="retryButton" class="btn btn-primary">„ÇÇ„ÅÜ‰∏ÄÂ∫¶</button>
                    <button id="rankingButton2" class="btn btn-secondary">„É©„É≥„Ç≠„É≥„Ç∞„ÇíË¶ã„Çã</button>
                    <button id="homeButton" class="btn btn-secondary">„Éõ„Éº„É†„Å∏</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- „É©„É≥„Ç≠„É≥„Ç∞ÁîªÈù¢ -->
    <div id="rankingScreen" class="screen">
        <div class="container">
            <h2 class="ranking-title">„É©„É≥„Ç≠„É≥„Ç∞</h2>
            <div class="ranking-tabs">
                <button class="tab-btn active" data-tab="overall">Á∑èÂêà</button>
                <button class="tab-btn" data-tab="difficulty">Èõ£ÊòìÂ∫¶Âà•</button>
                <button class="tab-btn" data-tab="today">‰ªäÊó•</button>
                <button class="tab-btn" data-tab="personal">Ëá™Â∑±„Éô„Çπ„Éà</button>
            </div>
            
            <div class="ranking-content">
                <div id="rankingList" class="ranking-list">
                    <div class="loading">„É©„É≥„Ç≠„É≥„Ç∞„ÇíË™≠„ÅøËæº„Åø‰∏≠...</div>
                </div>
            </div>
            
            <button id="backButton" class="btn btn-secondary">Êàª„Çã</button>
        </div>
    </div>
    
    <!-- „É¢„Éº„ÉÄ„É´ -->
    <div id="saveModal" class="modal">
        <div class="modal-content">
            <h3>üéâ „É©„É≥„Ç≠„É≥„Ç∞ÂÖ•„ÇäÔºÅ</h3>
            <p id="rankingPosition"></p>
            <button id="modalClose" class="btn btn-primary">OK</button>
        </div>
    </div>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    
    <!-- „Ç≤„Éº„É†„Çπ„ÇØ„É™„Éó„Éà -->
    <script src="js/firebase-config.js"></script>
    <script src="js/score-manager.js"></script>
    <script src="js/main.js"></script>
</body>
</html>